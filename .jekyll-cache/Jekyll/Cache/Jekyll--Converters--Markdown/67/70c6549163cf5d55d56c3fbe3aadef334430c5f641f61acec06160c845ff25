I"Ñ
<h1 id="swiftui-é€šè¿‡å±æ€§åŒ…è£…çš„æ˜ å°„å€¼">SwiftUI é€šè¿‡å±æ€§åŒ…è£…çš„æ˜ å°„å€¼</h1>

<blockquote>
  <p>æ—¨åœ¨é˜æ˜ï¼š@State çš„$å±æ€§åŒ…è£…æ˜ å°„å€¼çš„å®ç°</p>
</blockquote>

<p>SwiftUIçš„@Stateé€šè¿‡ä½¿ç”¨å±æ€§åŒ…è£…çš„æ˜ å°„å€¼<code class="language-plaintext highlighter-rouge"> projectedValue</code>ã€å¿…é¡»è¿™ä¸ªï¼Œé¢„è®¾è§„å®šã€‘</p>

<p>è¿”å›æˆ‘ä»¬ä½¿ç”¨çš„ä¼ é€’ç±»å‹ï¼Œä¹Ÿå°±æ˜¯@Bingdingçš„å€¼</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@State var isYouKnow:Bool = false; print("\(self.isYouKnow) æ˜ å°„å€¼@Binding=&gt; \($isYouKnow)")
</code></pre></div></div>

<p>// self.xxx</p>

<p>è·å–çš„æ˜¯å€¼ false</p>

<p>// $xxxè·å–çš„æ˜¯å±æ€§åŒ…è£…æ˜ å°„å€¼ï¼šprojectedValueã€å›ºå®šã€‘</p>

<p>Binding<Bool>(transaction: SwiftUI.Transaction(plist: []), location: SwiftUI.StoredLocation<Swift.Bool>, _value: false)</Swift.Bool></Bool></p>

<p>å¯¹äºåŒ…è£…å€¼æ¥è¯´ï¼ŒåŒ…è£…å±æ€§å¯ä»¥é€šè¿‡å®šä¹‰æ˜ å°„å€¼æ¥æš´éœ²é¢å¤–åŠŸèƒ½â€”â€”</p>

<p>æ¯”å¦‚è¯´ï¼Œç®¡ç†è®¿é—®æ•°æ®åº“çš„å±æ€§åŒ…è£…å¯ä»¥ç»™å®ƒæ˜ å°„çš„å€¼æš´éœ²ä¸€ä¸ª flushDatabaseConnection() æ–¹æ³•ã€‚</p>

<p>æ˜ å°„å€¼çš„åç§°å’ŒåŒ…è£…çš„å€¼ä¸€æ ·ï¼Œé™¤äº†å®ƒèµ·å§‹äºä¸€ä¸ªç¾å…ƒç¬¦å·ï¼ˆ $ ï¼‰ã€‚</p>

<p>å› ä¸ºä½ çš„ä»£ç ä¸èƒ½å®šä¹‰ $ å¼€å¤´çš„å±æ€§ï¼Œæ‰€ä»¥æ˜ å°„å€¼ä¸å¯èƒ½å½±å“åˆ°ä½ å®šä¹‰çš„å±æ€§ã€‚</p>

<p>ä¸‹é¢é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªpropertyWrapperå’ŒprojectedValueæ¥è¿›è¡Œç®€å•çš„é˜è¿°</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import UIKit

import Combine

import SwiftUI




struct UseStruct {

    var isUse:Bool = false

    var newValue:Int = 0

}




@propertyWrapper

struct SmallNumber {

    private var number = 0

//    var projectedValue = false

    var projectedValue: UseStruct = UseStruct(isUse: false, newValue: 0)

    var wrappedValue: Int {

        get { return number }

        set {

            if newValue &gt; 12 {

                number = 12

//                projectedValue = true

                projectedValue.isUse = true

                projectedValue.newValue = newValue

            } else {

                number = newValue

//                projectedValue = false

                projectedValue.isUse = true

                projectedValue.newValue = newValue

            }

        }

    }

}




struct SomeStructure {

    @SmallNumber var someNumber: Int

}




var ss = SomeStructure()

ss.someNumber = 4

print("\(ss.someNumber) -&gt; \(ss.$someNumber)")




ss.someNumber = 55

print("\(ss.someNumber) -&gt; \(ss.$someNumber)")
 
 
/*


ä¸Šé¢çš„è¾“å‡ºç»“æœï¼š
4 -&gt; UseStruct(isUse: true, newValue: 4)
12 -&gt; UseStruct(isUse: true, newValue: 55)
*/

</code></pre></div></div>
:ET