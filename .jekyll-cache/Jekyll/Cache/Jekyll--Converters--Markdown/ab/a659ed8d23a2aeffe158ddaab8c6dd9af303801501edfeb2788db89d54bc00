I"•<h1 id="è‡ªåŠ¨é—­åŒ…">è‡ªåŠ¨é—­åŒ…</h1>
<p>ç”¨äºä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‚æ•°çš„è¡¨è¾¾å¼ï¼Œé—­åŒ…ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›åŒ…è£…åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼çš„å€¼</p>

<p>ä¼˜ç‚¹ï¼š</p>
<ol>
  <li>çœç•¥é—­åŒ…èŠ±æ‹¬å·ï¼Œç”¨æ™®é€šè¡¨è¾¾å¼æ¥æ›¿ä»£æ˜¾ç¤ºé—­åŒ…</li>
  <li>å»¶æ—¶æ±‚å€¼/æ‰§è¡Œ</li>
</ol>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…</span>
<span class="k">var</span> <span class="nv">customersInLine</span> <span class="o">=</span> <span class="p">[</span><span class="s">"chirs"</span><span class="p">,</span> <span class="s">"Alex"</span><span class="p">,</span> <span class="s">"Ewa"</span><span class="p">,</span> <span class="s">"Barry"</span><span class="p">,</span> <span class="s">"Daniella"</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="n">customersInLine</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>

<span class="c1">// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…ï¼šæ‰€è°“è‡ªåŠ¨é—­åŒ…ï¼Œå°±æ˜¯è°ƒç”¨æ—¶å€™æ‰æ‰§è¡Œé—­åŒ…å†…ä»£ç </span>
<span class="k">let</span> <span class="nv">customerProviderClosure</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="k">in</span>
    <span class="k">return</span> <span class="n">customersInLine</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// ä¼˜åŒ–è‡ªåŠ¨é—­åŒ…ï¼š()ã€è¿”å›å€¼ã€in å‡è‡ªåŠ¨æ¨åˆ°ä¼˜åŒ–</span>
<span class="k">let</span> <span class="nv">providerClosure</span> <span class="o">=</span> <span class="p">{</span> <span class="n">customersInLine</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="mi">0</span><span class="p">)}</span>

<span class="c1">// è‡ªåŠ¨é—­åŒ…å»¶æ—¶æ±‚å€¼</span>
<span class="nf">print</span><span class="p">(</span><span class="s">"Now serving </span><span class="se">\(</span><span class="nf">providerClosure</span><span class="p">()</span><span class="se">)</span><span class="s">!"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">customersInLine</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>

<span class="c1">// é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œè¯¥é—­åŒ…ä¸ºæ˜¾å¼é—­åŒ…</span>
<span class="kd">func</span> <span class="nf">serve</span><span class="p">(</span><span class="n">customer</span> <span class="nv">customerProvider</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Now serving </span><span class="se">\(</span><span class="nf">customerProvider</span><span class="p">()</span><span class="se">)</span><span class="s">!"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// å°†å…¥å‚é€šè¿‡ @autoclosure è½¬åŒ–ä¸ºè‡ªåŠ¨é—­åŒ…</span>
<span class="kd">func</span> <span class="nf">serveAuto</span><span class="p">(</span><span class="n">customer</span> <span class="nv">customerProvider</span><span class="p">:</span> <span class="kd">@autoclosure</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"now serving </span><span class="se">\(</span><span class="nf">customerProvider</span><span class="p">()</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">serve</span><span class="p">(</span><span class="nv">customer</span><span class="p">:</span> <span class="p">{</span><span class="n">customersInLine</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="mi">0</span><span class="p">)})</span> <span class="c1">// æ˜¾å¼é—­åŒ…</span>
<span class="nf">serveAuto</span><span class="p">(</span><span class="nv">customer</span><span class="p">:</span> <span class="n">customersInLine</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="c1">// å¯ä»¥å¢åŠ ä»£ç å¤æ‚åº¦å‘¢ï¼ŒğŸ˜€</span>

<span class="c1">// è‡ªåŠ¨é€ƒé€¸é—­åŒ…</span>
<span class="kd">func</span> <span class="nf">autoEscapingClosure</span><span class="p">(</span><span class="n">_</span> <span class="nv">customerProvider</span><span class="p">:</span> <span class="kd">@autoclosure</span> <span class="kd">@escaping</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">completionHandlers</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">customerProvider</span><span class="p">)</span> <span class="c1">// æ•è·</span>
<span class="p">}</span>
<span class="nf">autoEscapingClosure</span><span class="p">(</span><span class="n">customersInLine</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="c1">// è°ƒç”¨æ•è·é€ƒé€¸é—­åŒ…</span>

<span class="k">for</span> <span class="n">cusPro</span> <span class="k">in</span> <span class="n">completionHandlers</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"now get </span><span class="se">\(</span><span class="nf">cusPro</span><span class="p">()</span><span class="se">)</span><span class="s">"</span><span class="p">)</span> <span class="c1">// è°ƒç”¨æ•è·çš„è‡ªåŠ¨é€ƒé€¸é—­åŒ…</span>
<span class="p">}</span>

</code></pre></div></div>
:ET