<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://www.boolvalue.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.boolvalue.com/" rel="alternate" type="text/html" /><updated>2021-07-08T11:10:33+08:00</updated><id>https://www.boolvalue.com/feed.xml</id><title type="html">bool</title><subtitle>I find I'm so excited. I can barely sit still or hold a thought in my head. I think it the excitement only a free man can feel, a free man at the start of a long journey whose conclusion is uncertain. I hope I can make it across the border. I hope to see my friend, and shake his hand. I hope the Pacific is as blue as it has been in my dreams. I hope.
</subtitle><author><name>WANG</name></author><entry><title type="html">Swift Namespace Stepbystep</title><link href="https://www.boolvalue.com/swift-namespace-stepbystep.html" rel="alternate" type="text/html" title="Swift Namespace Stepbystep" /><published>2021-07-07T00:00:00+08:00</published><updated>2021-07-07T00:00:00+08:00</updated><id>https://www.boolvalue.com/swift-namespace-stepbystep</id><content type="html" xml:base="https://www.boolvalue.com/swift-namespace-stepbystep.html">&lt;h1 id=&quot;swift-å‘½åç©ºé—´&quot;&gt;swift å‘½åç©ºé—´&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¾ªåºæ¸è¿›è·å–ä¸€ä¸ªä¼˜é›…çš„swiftå‘½åç©ºé—´&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å®ç°ä¸€ä¸ªå‘½åç©ºé—´&quot;&gt;å®ç°ä¸€ä¸ªå‘½åç©ºé—´&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ›å»ºç»“æ„ä½“ï¼Œå¹¶å®ç°æŒ‡å®šæ–¹æ³•&lt;/li&gt;
  &lt;li&gt;æ‰©å±•æŒ‡å®šç±»å‹çš„æ§ä»¶&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨æŒ‡å®šç±»çš„å‘½åç©ºé—´å±æ€§æŒæœ‰å®ä¾‹çš„æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;struct ButtonNameSpace {
    func hello()  {
        print(&quot;hello bae namespace&quot;)
    }
}

extension UIButton {
    var namespace: ButtonNameSpace {
        return ButtonNameSpace()
    }
}

UIButton().namespace.hello()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;åˆ›å»ºä¸€ä¸ªæŒæœ‰è¯¥ç±»çš„å‘½åç©ºé—´&quot;&gt;åˆ›å»ºä¸€ä¸ªæŒæœ‰è¯¥ç±»çš„å‘½åç©ºé—´&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ›å»ºç»“æ„ä½“ï¼Œç»“æ„ä½“æŒæœ‰æŒ‡å®šç±»å‹ï¼›åŒ…å«åˆå§‹åŒ–æ–¹æ³•ï¼›åŒ…å«è‡ªå®šä¹‰æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;æ‰©å±•æŒ‡å®šç±»ï¼Œæ·»åŠ å‘½åç©ºé—´å±æ€§ï¼Œå°†selfä¼ å…¥è¯¥ç»“æ„ä½“&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨ç±».å‘½åç©ºé—´.æŒ‡å®šæ–¹æ³•(å¯ä»¥è®¿é—®æŒ‡å®šç±»å±æ€§)&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; struct ButtonNameSpace {
     let btn: UIButton
     init(_ btn: UIButton) {
         self.btn = btn
     }
     func hello() {
         print(&quot;hello \(self.btn.titleLabel?.text ?? &quot;&quot;)&quot;)
     }
 }

 extension UIButton {
     var namespace: ButtonNameSpace {
         return ButtonNameSpace(self)
     }
 }

 let btn = UIButton()
 btn.titleLabel?.text = &quot;hehehe&quot;
 btn.namespace.hello()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä½¿ç”¨æ³›å‹å‘½åç©ºé—´&quot;&gt;ä½¿ç”¨æ³›å‹å‘½åç©ºé—´&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ›å»ºæ³›å‹ç»“æ„ä½“&lt;/li&gt;
  &lt;li&gt;æ‰©å±•æŒ‡å®šç±»æŒæœ‰å‘½åç©ºé—´å±æ€§ï¼Œè¯¥å±æ€§æŒæœ‰ç»“æ„ä½“&lt;/li&gt;
  &lt;li&gt;é€šè¿‡whereè¯­å¥ä¸ºç‰¹å®šç±»æ‰©å±•æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;é€šè¿‡å‘½åç©ºé—´è°ƒç”¨æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;struct MyNameSpace&amp;lt;Base&amp;gt; {
    let base: Base
    init(base: Base) {
        self.base = base
    }
}

extension UIButton {
    var namespace: MyNameSpace&amp;lt;UIButton&amp;gt; {
        return MyNameSpace(base: self)
    }
}

extension MyNameSpace where Base: UIButton { // Base == UIButton
    func hello() {
        print(&quot;hi \(base.titleLabel?.text ?? &quot;&quot;)&quot;)
    }
}


let btn = UIButton()
btn.titleLabel?.text = &quot;WANG&quot;
btn.namespace.hello()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä½¿ç”¨åè®®å’Œæ³›å‹æ‰©å±•å®ç°é€šç”¨å‘½åç©ºé—´&quot;&gt;ä½¿ç”¨åè®®å’Œæ³›å‹æ‰©å±•å®ç°é€šç”¨å‘½åç©ºé—´&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ›å»ºä¸€ä¸ªä¼ å…¥æ³›å‹æ•°æ®çš„ç»“æ„ä½“&lt;/li&gt;
  &lt;li&gt;åˆ›å»ºä¸€ä¸ªæŒæœ‰æ³›å‹å ä½ç¬¦çš„åè®®ï¼Œå¹¶åˆ›å»ºå‘½åç©ºé—´å±æ€§ï¼Œå’Œå‘½åç©ºé—´ç±»å‹å±æ€§&lt;/li&gt;
  &lt;li&gt;æ‰©å±•åè®®ï¼Œå®ç°å±æ€§ã€ç±»å‹å±æ€§çš„getæ–¹æ³•&lt;/li&gt;
  &lt;li&gt;æ‰©å±•æ­¥éª¤ä¸€åˆ›å»ºçš„ç»“æ„ä½“ï¼Œå¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;where&lt;/code&gt;ç»™æŒ‡å®šçš„ç±»ç»‘å®š&lt;/li&gt;
  &lt;li&gt;æŒ‡å®šç±»ç»§æ‰¿æ­¥éª¤äºŒåˆ›å»ºçš„åè®®ï¼Œè·å–æ‰©å±•ç»“æ„ä½“æ‰©å±•çš„æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;åˆ›å»ºå®ä¾‹å¹¶è°ƒç”¨æŸ¥çœ‹ç»“æœ&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public struct NameSpace&amp;lt;Base&amp;gt; {
    
    /// Base object  to extend
    public let base: Base
    
    /// Create extensions with base object
    /// - Parameter base: Base object
    public init(_ base: Base) {
        self.base = base
    }
}

public protocol NameSpaceCompatible {
    /// extended type
    associatedtype CompatibleType
    
    /// Perfect World Extension
    static var wm: NameSpace&amp;lt;CompatibleType&amp;gt;.Type { get set }
    
    /// Perfect World extension
    var wm: NameSpace&amp;lt;CompatibleType&amp;gt; { get set }
//    var wm_Self: NameSpace&amp;lt;Self&amp;gt; { get set }
//    static wm_Self: NameSpace&amp;lt;Self&amp;gt;.Type { get set }
}

extension NameSpaceCompatible {
    public static var wm: NameSpace&amp;lt;Self&amp;gt;.Type {
        get {
            return NameSpace&amp;lt;Self&amp;gt;.self
        }
        set {
            
        }
    }
    
    public var wm: NameSpace&amp;lt;Self&amp;gt; {
        get {
            return NameSpace(self)
        }
        set {
            
        }
    }
}


// ç»™ç‰¹å®šçš„ç±»åŠ ä¸Šå‘½åç©ºé—´

class Custom {
    init(name: String) {
        self.name = name
    }
    var name: String
    func myfunc() {
        print(&quot;just use namespace run my func&quot;)
    }
}
// ç»™æ‰€ç»§æ‰¿çš„åŸºç±»æ·»åŠ æ–¹æ³•
extension NameSpace {
    func baseHello() {
        print(&quot;hi type is \(base.self) and name is \((base as! Custom).name)&quot;)
    }
}

extension Custom: NameSpaceCompatible {}

let cm = Custom(name: &quot;WANG&quot;)
cm.myfunc()
cm.wm.baseHello()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">swift å‘½åç©ºé—´</summary></entry><entry><title type="html">Swiftstyleguide</title><link href="https://www.boolvalue.com/swiftstyleguide.html" rel="alternate" type="text/html" title="Swiftstyleguide" /><published>2021-07-07T00:00:00+08:00</published><updated>2021-07-07T00:00:00+08:00</updated><id>https://www.boolvalue.com/SwiftStyleGuide</id><content type="html" xml:base="https://www.boolvalue.com/swiftstyleguide.html">&lt;h1 id=&quot;swift-ä»£ç é£æ ¼&quot;&gt;Swift ä»£ç é£æ ¼&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;æ–‡ä»¶å&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyType.swift&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;æ–‡ä»¶åŒ…å«å•ä¸ªæ‰©å±•&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyType+MyProtocol.swift&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;æ–‡ä»¶åŒ…å«å¤šæ‰©å±•&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyType+Additions.swift&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;æºæ–‡ä»¶ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTF-8&lt;/code&gt;æ–¹å¼ç¼–ç &lt;/li&gt;
  &lt;li&gt;å­—é¢é‡ç¦æ­¢ä½¿ç”¨æ··åˆASCIIå’Œå…¶å®ƒå­—ç¬¦ï¼Œå¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Ãœbergr\u{00F6}\u{00DF}e\n&quot;&lt;/code&gt;ï¼Œå°±æ˜¯è¢«ç¦æ­¢çš„&lt;/li&gt;
  &lt;li&gt;å¯¼å…¥è¯­å¥æ”¾åœ¨æ–‡ä»¶éæ³¨é‡Šçš„æœ€å‰é¢ï¼ŒæŒ‰ç…§å­—æ¯å‡åºçš„é¡ºåºè¿›è¡Œæ’åº&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;// MARK: -&lt;/code&gt;å¯¹åˆ†ç»„è¿›è¡Œæè¿°&lt;/li&gt;
  &lt;li&gt;å¯¹è¿‡é•¿å‡½æ•°çš„æ¢è¡Œè¦éµå¾ªæŒ‡å®šæ¢è¡Œè§„èŒƒ&lt;/li&gt;
  &lt;li&gt;éæ–‡æ¡£æ³¨é‡Šï¼Œå°½é‡ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;//&lt;/code&gt;è¿›è¡Œæ³¨é‡Šï¼Œè€Œä¸è¦ä½¿ç”¨Cé£æ ¼çš„å—æ ¼å¼åŒ–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/* ... */&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;æ¯ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let&lt;/code&gt;æˆ–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;var&lt;/code&gt;åªå£°æ˜ä¸€ä¸ªå˜é‡&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;switch&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;case&lt;/code&gt;åŒçº§ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;case&lt;/code&gt;å¯¹åº”çš„ä»£ç å‰ç½®2ä¸ªç©ºæ ¼&lt;/li&gt;
  &lt;li&gt;å°½é‡åœ¨æœ«å°¾å¯çœç•¥é€—å·çš„ä½ç½®éƒ½åŠ ä¸Šé€—å·ï¼Œè¿™æ ·åœ¨åç»­åŠ å…¥æ–°å…ƒç´ æ—¶ï¼Œä¼šæœ‰æ›´æ˜æ˜¾çš„åŒºåˆ†&lt;/li&gt;
  &lt;li&gt;æ³¨è§£æœ€å¥½åœ¨å‡½æ•°çš„ä¸Šä¸€è¡Œï¼Œä¸å¸¦å‚æ•°çš„æ³¨è§£å¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@objc&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@IBOutlet&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@NSManaged&lt;/code&gt;å¯ä»¥å†™åœ¨åŒè¡Œ&lt;/li&gt;
  &lt;li&gt;æ„é€ å™¨åœ¨èµ‹å€¼æ—¶æ˜¾ç¤ºçš„ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.&lt;/code&gt;ä»¥æ¶ˆé™¤æ­§ä¹‰&lt;/li&gt;
  &lt;li&gt;é™æ€å±æ€§å’Œç±»å±æ€§è¿”å›å£°æ˜æ¥å…´çš„å®ä¾‹æ—¶ï¼Œä¸éœ€è¦åŠ ä¸Šè¯¥ç±»å‹åå­—ä½œä¸ºåç¼€ã€‚å¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;public class var redColor: UIColor&lt;/code&gt;ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redColor&lt;/code&gt;å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;red&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å…¨å±€å¸¸äº®ä¹Ÿä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œè€ŒéåŒˆç‰™åˆ©å‘½åæ³•ï¼Œå³é&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;g&lt;/code&gt;æˆ–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;k&lt;/code&gt;å¼€å¤´&lt;/li&gt;
  &lt;li&gt;ä»£ç å†ç¼–è¯‘æ—¶å°½å¯èƒ½ä¿æŒæ²¡æœ‰è­¦å‘Š&lt;/li&gt;
  &lt;li&gt;åªè¯»è®¡ç®—å±æ€§çš„getå—å¯ä»¥çœç•¥ï¼Œå°†æ‰§è¡Œä½“ç›´æ¥åµŒå¥—åœ¨å±æ€§å£°æ˜é‡Œå³å¯&lt;/li&gt;
  &lt;li&gt;æ•°ç»„ã€å­—å…¸å’Œå¯é€‰ç±»å‹å°½è‚¯èƒ½çš„ç®€å†™ã€‚å¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Array&amp;lt;Element&amp;gt; -&amp;gt; [Element]&lt;/code&gt;ç­‰&lt;/li&gt;
  &lt;li&gt;å¯é€‰ç±»å‹æ¨èä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if let&lt;/code&gt;è¿›è¡Œè§£åŒ…ã€‚å¦‚æœåªæ˜¯å•çº¯çš„å€¼æ¯”è¾ƒï¼Œåˆ™ä¸éœ€è¦è¿›è¡Œè§£åŒ…&lt;/li&gt;
  &lt;li&gt;å¼ºåˆ¶è§£åŒ…é€šå¸¸ä»£è¡¨ä»£ç çš„ç±»å‹å®šä¹‰æœ‰é—®é¢˜ï¼Œå¼ºçƒˆä¸æ¨èã€‚éœ€è¦æ·»åŠ æ³¨é‡Šä»¥è¯´æ˜è¯¥æ“ä½œåœ¨åˆç†æ“ä½œçš„æ‰€æœ‰èŒƒå›´å†…å‡æ˜¯å®‰å…¨çš„&lt;/li&gt;
  &lt;li&gt;è®¿é—®ç™»è®°åº”è¯¥ç»†åŒ–åˆ°åµŒå¥—å†…ï¼Œè€Œéåœ¨é¡¶å±‚ç›´æ¥ç¡®å®š&lt;/li&gt;
  &lt;li&gt;å¦‚æœenumæšä¸¾å’Œç±»å…³è”æœ‰çˆ¶å­å…³ç³»ï¼Œæ›´æ¨èå°†æšä¸¾æ”¾å…¥è¯¥ç±»ä¸­&lt;/li&gt;
  &lt;li&gt;ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for where&lt;/code&gt;æ¥æ›¿ä»£forå¾ªç¯é‡Œçš„ifæ¡ä»¶åˆ¤æ–­ï¼Œå³æ•°æ®æ¸…æ´—åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;æ–‡æ¡£æ³¨é‡Šæ¨èä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;///&lt;/code&gt;è¿›è¡Œæ³¨é‡Šï¼Œå¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;- Parameters:\n  -digit: xxx&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Appleæ ‡è®°æ ¼å¼ï¼Œå¯ä»¥ä¸°å¯Œä½ çš„æ–‡æ¡£æ³¨é‡Šï¼Œå¦‚å•æ˜Ÿå·æ–œä½“ã€åŒå‹å·æˆ–åŒä¸‹åˆ’çº¿ç²—ä½“ã€åå¼•å·å¯Œè±ªå‘½æˆ–å†…è”ä»£ç ã€ä¸‰åå¼•å¤šè¡Œä»£ç &lt;/li&gt;
&lt;/ol&gt;</content><author><name>WANG</name></author><summary type="html">Swift ä»£ç é£æ ¼</summary></entry><entry><title type="html">Cocoapods Compile</title><link href="https://www.boolvalue.com/cocoapods-compile.html" rel="alternate" type="text/html" title="Cocoapods Compile" /><published>2021-07-07T00:00:00+08:00</published><updated>2021-07-07T00:00:00+08:00</updated><id>https://www.boolvalue.com/cocoapods-compile</id><content type="html" xml:base="https://www.boolvalue.com/cocoapods-compile.html">&lt;h1 id=&quot;cocoapods-ç¼–è¯‘é—®é¢˜&quot;&gt;CocoaPods ç¼–è¯‘é—®é¢˜&lt;/h1&gt;

&lt;h2 id=&quot;æ”¯æŒimportå¯¼å…¥&quot;&gt;æ”¯æŒ@importå¯¼å…¥&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;podfileä¸­å¯¹targetä¸‹çš„æŸä¸ªä¾èµ–æŒ‡å®š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:modular_headers =&amp;gt; true&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;podfileä¸­å¯¹targetæ•´ä½“ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_modular_header!&lt;/code&gt;ï¼Œ(è¿™é‡Œçš„!æ˜¯å¿…é¡»çš„æ„æ€)ï¼Œå¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:modular_headers =&amp;gt; false&lt;/code&gt;å¯¹éƒ¨åˆ†è¿›è¡Œæ’é™¤&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;æŒ‡å®šä½¿ç”¨libraryåº“è¿˜æ˜¯frameworkæ¡†æ¶&quot;&gt;æŒ‡å®šä½¿ç”¨libraryåº“è¿˜æ˜¯frameworkæ¡†æ¶&lt;/h2&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;æ¡†æ¶ = åº“ï¼ˆé™æ€åº“/åŠ¨æ€åº“ï¼‰+ .hï¼ˆå¤´æ–‡ä»¶ï¼‰ + bundleï¼ˆèµ„æºåŒ…ï¼‰
.tbd æ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª YAML æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶æè¿°äº†éœ€è¦é“¾æ¥çš„åŠ¨æ€åº“ä¿¡æ¯ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ å‡å°åº”ç”¨ç¨‹åºçš„ä¸‹è½½å¤§å°
å¯¹äº OSX/iOSï¼Œé™æ€åº“çš„åç¼€æ˜¯ .aï¼ŒåŠ¨æ€åº“çš„åç¼€æ˜¯ .dylibï¼›åœ¨ UNIX ä¸­ï¼Œé™æ€åº“çš„åç¼€æ˜¯ .aï¼ŒåŠ¨æ€åº“çš„åç¼€æ˜¯ .so
åœ¨ OSX/iOS ä¸­ï¼Œåº“é‡‡ç”¨ Mach-O æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼›åœ¨ UNIX ä¸­ï¼Œåº“é‡‡ç”¨ ELF æ ¼å¼è¿›è¡Œå­˜å‚¨ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_frameworks!&lt;/code&gt;å¼ºåˆ¶ä½¿ç”¨æ¡†æ¶è€Œä¸æ˜¯åº“çš„å½¢å¼&lt;/li&gt;
  &lt;li&gt;å¯ä»¥å†å…¶åä¸»åŠ¨ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:link: =&amp;gt; :dynamic&lt;/code&gt;æˆ–staticå½¢å¼&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ğŸ‘†&lt;strong&gt;&lt;em&gt;æ›´æ­£ï¼ï¼ï¼&lt;/em&gt;&lt;/strong&gt; â†©ï¸&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;ä¸ºä»€ä¹ˆä¼šæœ‰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_framework!&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Xcode9ä¹‹å‰ï¼Œä¸æ”¯æŒswifté™æ€åº“ç¼–è¯‘ï¼Œæ‰€ä»¥swiftä¸å¾—ä¸ä½¿ç”¨framework[åº”è¯¥æ˜¯embed framework]çš„å½¢å¼è¿›è¡Œç¼–è¯‘ï¼›å¤§é‡ä½¿ç”¨åŠ¨æ€åº“ä¼šå¯¼è‡´åº”ç”¨å¯åŠ¨æ—¶é—´å˜é•¿ã€‚
Xcode9ä¹‹åå¼€å§‹æ”¯æŒswifté™æ€åº“ç¼–è¯‘ï¼Œæ‰€ä»¥åœ¨CocoaPods1.5.0ä»¥åï¼Œpodfileå·²ç»ä¸éœ€è¦å¼ºåˆ¶ä½¿ç”¨åŠ¨æ€åº“ç¼–è¯‘ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸ºä»€ä¹ˆOCçš„podè¦ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modular_headers!&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœä¸€ä¸ªswift pod ä¾èµ–äº†ä¸€ä¸ªocçš„podï¼Œå¼€å¯äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modular headers&lt;/code&gt;åï¼Œå°±æ˜¯è®²podè½¬åŒ–ä¸ºModularï¼Œè€ŒModularå¯ä»¥å†swiftä¸­ç›´æ¥importï¼Œä¸å†éœ€è¦ç»è¿‡bridging-headerè¿›è¡Œæ¡¥æ¥ï¼Œä»è€Œç®€åŒ–äº†swiftå¼•ç”¨OCçš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;cococpodsç¼–è¯‘&quot;&gt;CococPodsç¼–è¯‘&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;module.modulemap æ˜¯ä¸€ä¸ªæ¨¡å—æ˜ å°„æ–‡ä»¶ï¼Œèƒ½å¤Ÿä½¿æ¡†æ¶æ”¯æŒæ¨¡å—ï¼ˆä»¥åŠå­æ¨¡å—ï¼‰ï¼Œåœ¨ç¼–è¯‘æ—¶ä¹Ÿèƒ½å¤Ÿåˆ©ç”¨æ¨¡å—ç¼–è¯‘çš„ä¼˜åŠ¿è¿›è¡ŒåŠ é€Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¼šå°†æ¯ä¸ªpodè½¬æ¢ä¸ºUmbrellaFrameworkå¹¶æ·»åŠ modulemapä½¿å…¶æ”¯æŒæ¨¡å—
æ¯ä¸ªpodçš„SupportFileä¸­ä¼šæœ‰ä¸¤ä¸ªå¯¹åº”æ–‡ä»¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PodName-umbrella.h&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PodName.modulemap&lt;/code&gt;&lt;/p&gt;</content><author><name>WANG</name></author><summary type="html">CocoaPods ç¼–è¯‘é—®é¢˜</summary></entry><entry><title type="html">Core Ml</title><link href="https://www.boolvalue.com/core-ml.html" rel="alternate" type="text/html" title="Core Ml" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/core-ml</id><content type="html" xml:base="https://www.boolvalue.com/core-ml.html">&lt;h1 id=&quot;coreml-æ¦‚è§ˆ&quot;&gt;CoreML æ¦‚è§ˆ&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨Appä¸­æ•´åˆæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå®¢æˆ·ç«¯çº§åˆ«çš„æœºå™¨å­¦ä¹ &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Core ML æ˜¯åŸºäºAccelerateå’ŒBNNSï¼ˆç”¨äºæ„å»ºå’Œè¿è¡Œç”¨äºè®­ç»ƒå’Œæ¨ç†çš„ç¥ç»ç½‘ç»œçš„å­ç¨‹åºï¼‰æä¾›å¤§è§„æ¨¡é«˜æ€§èƒ½ä¸”ä½åŠŸè€—çš„æ•°å­¦å’Œå›¾åƒè®¡ç®—ï¼ŒMetal Performance Shaders GPUé«˜åº¦ä¼˜åŒ–çš„è®¡ç®—å’Œå›¾å½¢ç€è‰²å™¨&lt;/p&gt;

&lt;h3 id=&quot;ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­çœ‹å›¾åƒè¯†åˆ«coremlæ•´ä½“æµç¨‹&quot;&gt;ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­çœ‹å›¾åƒè¯†åˆ«coreMLæ•´ä½“æµç¨‹ï¼š&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;æ·»åŠ å›¾åƒè¯†åˆ« xx.mlmodelæ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;åœ¨xcodeä¸­ç‚¹å‡»è¯¥æ–‡ä»¶ï¼Œè¿›å…¥ previewæ¨¡å— æŸ¥çœ‹å¹¶å®è·µåŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;åˆ›å»ºå›¾åƒè¾“å…¥æºï¼ŒåŠå›¾å½¢è½¬åŒ–ä»£ç†&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨VNCoreMLModelæ ¹æ®è·¯å¾„åˆ›å»ºè¯†åˆ«æ¨¡å‹ï¼Œæ„å»ºVNCoreMLRequestè¿›è¡Œè¯†åˆ«&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨VNImageRequestHandleråˆ›å»ºå›¾ç‰‡åˆ†æè¯·æ±‚ï¼Œè°ƒç”¨performè¿›è¡Œå›¾åƒè¯†åˆ«&lt;/li&gt;
  &lt;li&gt;æ ¹æ®ç»“æœè¿›è¡Œç›¸åº”å¤„ç†æˆ–åé¦ˆ&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;core-ml-æœºå™¨å­¦ä¹ åˆ†ç±»&quot;&gt;Core ML æœºå™¨å­¦ä¹ åˆ†ç±»&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ­¤å¤„ç‰¹æŒ‡åœ¨iOSè®¾å¤‡ç«¯æ‰€æ¶‰åŠçš„æœºå™¨å­¦ä¹ ç±»å‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;è®¡ç®—æœºè§†è§‰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Vision&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;è‡ªç„¶è¯­è¨€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Natural Language&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;è¯­éŸ³è¯†åˆ«&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Speech&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å£°éŸ³åˆ†æ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sound Analysis&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;è·å–core-ml-æ¨¡å‹mlmodelæ–‡ä»¶&quot;&gt;è·å–Core ML æ¨¡å‹(.mlmodelæ–‡ä»¶)&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;Appleå·²è®­ç»ƒå¥½çš„&lt;a href=&quot;https://developer.apple.com/cn/machine-learning/models/&quot;&gt;çƒ­é—¨å¼€æºæ¨¡å‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å…¶å®ƒå¹³å°è®­ç»ƒå¥½çš„æ¨¡å‹ä½¿ç”¨&lt;a href=&quot;https://github.com/apple/coremltools/blob/main/README.md&quot;&gt;Core ML Tools&lt;/a&gt;è¿›è¡Œè½¬åŒ–&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨&lt;a href=&quot;https://developer.apple.com/cn/documentation/createml/&quot;&gt;Create ML åº”ç”¨&lt;/a&gt;æ„å»ºå’Œè®­ç»ƒæ¨¡å‹&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;è®­ç»ƒæ¨¡å‹&quot;&gt;è®­ç»ƒæ¨¡å‹&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;åŒ…å«ï¼šå›¾åƒè®­ç»ƒã€æ–‡æœ¬è®­ç»ƒã€è¡¨æ ¼è®­ç»ƒã€å£°éŸ³ã€è§†é¢‘ç­‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å›¾åƒåˆ†ç±»&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å•å¼ å›¾ç‰‡ -&amp;gt; Image classifier -&amp;gt; ç±»åˆ«æ ‡ç­¾&lt;/li&gt;
  &lt;li&gt;å·²æ ‡è®°å›¾åƒç¤ºä¾‹ -&amp;gt; Create ML -&amp;gt; å›¾åƒåˆ†ç±»å™¨ç»“æœ&lt;/li&gt;
  &lt;li&gt;è®­ç»ƒå®Œæˆåï¼Œæ ¹æ®è¯„ä¼°çš„æ•°æ®è¿›è¡ŒCore MLæ¨¡å‹æ–‡ä»¶å¯¼å‡ºï¼Œåœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ–‡æœ¬åˆ†ç±»ï¼ˆè®­ç»ƒæ–‡æœ¬åˆ†ç±»å™¨çš„æ–¹æ³•æ˜¯å‘å®ƒå±•ç¤ºå¤§é‡å·²æ ‡è®°çš„æ–‡æœ¬ç¤ºä¾‹ï¼‰&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;æ”¶é›†æ–‡æœ¬æ•°æ®å¹¶å¯¼å…¥åˆ° MLDataTable å®ä¾‹ä¸­ã€‚æ‚¨å¯ä»¥ä» JSON å’Œ CSV æ ¼å¼åˆ›å»ºæ•°æ®è¡¨&lt;/li&gt;
  &lt;li&gt;ä»å¤§é‡çš„æ•°æ®ä¸­åˆ†å‰²ä¸ºè®­ç»ƒç”¨ã€è¯„ä¼°ç”¨, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç”¨ MLDataTable (è‹±æ–‡) çš„ randomSplit(by:seed:)&lt;/code&gt;å°†æ•°æ®åˆ†é…åˆ°ä¸åŒæ•°æ®å­˜å‚¨ä¸­&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let (trainingData, testingData) = data.randomSplit(by: 0.8, seed: 5)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;åˆ›å»ºå’Œè®­ç»ƒæ–‡æœ¬åˆ†ç±»å™¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MLTextClassifier&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨åˆ†ç¦»çš„æµ‹è¯•æ•°æ®è¯„ä¼°è®­ç»ƒå‡†ç¡®åº¦&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let evaluationMetrics = sentimentClassifier.evaluation(on: testingData)&lt;/code&gt;è·å–è¿è¡Œç»“æœå&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let evaluationAccuracy = (1.0 - evaluationMetrics.classificationError) * 100&lt;/code&gt;è®¡ç®—å‡†ç¡®æ€§&lt;/li&gt;
  &lt;li&gt;å­˜å‚¨coreMLæ¨¡å‹ï¼Œä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MLModelMetadata&lt;/code&gt;åˆ›å»ºå¸¦æœ‰æè¿°æ€§çš„å®ä¾‹åå†™å…¥ç£ç›˜æŒ‡å®šä½ç½®å³å¯&lt;/li&gt;
  &lt;li&gt;å°†æ¨¡å‹æ·»åŠ åˆ°Appä¸­å¹¶ä½¿ç”¨&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;ç¼©å‡-core-ml-app-çš„å¤§å°&quot;&gt;ç¼©å‡ Core ML App çš„å¤§å°&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;è½¬åŒ–ä¸ºè¾ƒä½ç²¾åº¦æ¨¡å‹ï¼ŒåŸºæœ¬æ‰€æœ‰æ¨¡å‹å‡æœ‰æµ®ç‚¹æƒé‡ï¼Œæƒé‡è¶Šå¤§å¯¹åº”çš„mlmodelæ–‡ä»¶è¶Šå¤§ï¼Œä½¿ç”¨ä½ç²¾åº¦å¯ä»¥å¤§å¹…åº¦å‡å°åŒ…ä½“ç§¯&lt;/li&gt;
  &lt;li&gt;è¿è¡Œæ—¶ä¸‹è½½å’Œç¼–è¯‘æ¨¡å‹ï¼Œé¢„ä¸‹è½½åŒ…ä¸åŒ…å«mlmodelæ–‡ä»¶ï¼Œä½¿ç”¨å…¶å®ƒç½‘ç»œæ–¹å¼ä¸‹è½½æ–‡ä»¶ï¼ŒæŒä¹…åŒ–ä¿å­˜åœ¨åº”ç”¨æŸå¤„ï¼Œä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;try MLModel.compileModel(at: modelDescriptionURL)&lt;/code&gt;è¿›è¡Œæ¨¡å‹åŠ è½½&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;å…³è”æ–‡ç« &quot;&gt;å…³è”æ–‡ç« &lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/documentation/accelerate/training_a_neural_network_to_recognize_digits&quot;&gt;è®­ç»ƒç¥ç»ç½‘ç»œè¯†åˆ«æ•°å­—&lt;/a&gt;
&lt;a href=&quot;https://developer.apple.com/documentation/createml/creating_an_image_classifier_model&quot;&gt;åˆ›å»ºå¹¶è®­ç»ƒä¸€ä¸ªå›¾åƒè¯†åˆ«æ¨¡å‹&lt;/a&gt;&lt;/p&gt;</content><author><name>WANG</name></author><summary type="html">CoreML æ¦‚è§ˆ</summary></entry><entry><title type="html">Follow Closure</title><link href="https://www.boolvalue.com/follow-closure.html" rel="alternate" type="text/html" title="Follow Closure" /><published>2021-07-03T00:00:00+08:00</published><updated>2021-07-03T00:00:00+08:00</updated><id>https://www.boolvalue.com/follow-closure</id><content type="html" xml:base="https://www.boolvalue.com/follow-closure.html">&lt;h1 id=&quot;å°¾éšé—­åŒ…&quot;&gt;å°¾éšé—­åŒ…&lt;/h1&gt;

&lt;p&gt;åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;è‡ªå®šä¹‰å‡½æ•°ï¼Œå‡½æ•°ä¼ é€’çš„å‚æ•°åŒ…å«é—­åŒ…&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥æŒ‰ç…§æ­£å¸¸çš„è°ƒç”¨ï¼Œå°†é—­åŒ…å†™åœ¨å‡½æ•°å†…&lt;/li&gt;
  &lt;li&gt;å¦‚é—­åŒ…è¿‡å¤§ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºå°¾éšé—­åŒ…ï¼Œä»è€Œè¿›ä¸€æ­¥ä¼˜åŒ–ä»£ç &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°¾éšé—­åŒ…ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å°¾éšé—­åŒ…å¯ä»¥æ”¾åœ¨æ–¹æ³•func(){}å&lt;/li&gt;
  &lt;li&gt;åœ¨ä½¿ç”¨å°¾éšé—­åŒ…çš„æ—¶å€™ï¼Œå¦‚é—­åŒ…ä¸ºå”¯ä¸€å‚æ•°å¯ä»¥æŠŠfunc()çš„()çœç•¥&lt;/li&gt;
  &lt;li&gt;é€‚åˆå¤šè¡Œä¸šåŠ¡é€»è¾‘çš„é—­åŒ…&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sorted&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å°¾éšé—­åŒ…ï¼Œä¸èƒ½ä½¿ç”¨è¿ç®—ç¬¦ä¼˜åŒ–&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">å°¾éšé—­åŒ…</summary></entry><entry><title type="html">Escape Closure</title><link href="https://www.boolvalue.com/escape-closure.html" rel="alternate" type="text/html" title="Escape Closure" /><published>2021-07-03T00:00:00+08:00</published><updated>2021-07-03T00:00:00+08:00</updated><id>https://www.boolvalue.com/escape-closure</id><content type="html" xml:base="https://www.boolvalue.com/escape-closure.html">&lt;h1 id=&quot;é€ƒé€¸é—­åŒ…&quot;&gt;é€ƒé€¸é—­åŒ…ï¼š&lt;/h1&gt;
&lt;p&gt;é—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œé—­åŒ…åœ¨å‡½æ•°è¿”å›åæ‰æ‰§è¡Œï¼Œè¯¥é—­åŒ…ä¸ºé€ƒé€¸é—­åŒ…ï¼›&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ @escaping ä¿®é¥°,è¡¨æ˜é—­åŒ…å…è®¸é€ƒé€¸ï¼Œå¦‚æœæƒ³åœ¨å¤–éƒ¨ä½¿ç”¨å‚æ•°é—­åŒ…ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¯¥å…³é”®å­—è¿›è¡Œæ ‡è®°ï¼Œå¦åˆ™ä¼šæœ‰ç¼–è¯‘é”™è¯¯&lt;/p&gt;

&lt;p&gt;ä¸ä½¿ç”¨ @escapingï¼Œè¿˜æƒ³å†å¤–éƒ¨æ•è·ä¼šæŠ¥ç¼–è¯‘é”™è¯¯
è½¬åŒ–éé€ƒé€¸å‚æ•°åˆ°æ³›å‹å‚æ•°éœ€è¦å…è®¸å®ƒé€ƒé€¸ï¼Œå³ä½¿ç”¨ @escaping æ ‡è®°&lt;/p&gt;

&lt;p&gt;é€ƒé€¸æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å°†é—­åŒ…ä¿å­˜åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ä¸­&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;é€ƒé€¸é—­åŒ…éœ€è¦æ˜¾ç¤ºçš„ä½¿ç”¨selfï¼Œå› ä¸ºåç»­é—­åŒ…è¿˜è¦æ‰§è¡Œï¼Œä½¿ç”¨selfå¢åŠ å¼•ç”¨è®¡æ•°ï¼Œé˜²æ­¢è¢«è°ƒç”¨çš„æ—¶å€™è¢«æ€æ­»&lt;/li&gt;
  &lt;li&gt;éé€ƒé€¸é—­åŒ…å¯ä»¥éšå¼å¼•ç”¨self&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @escaping&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;someFuncionWithEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">é€ƒé€¸é—­åŒ…ï¼š é—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œé—­åŒ…åœ¨å‡½æ•°è¿”å›åæ‰æ‰§è¡Œï¼Œè¯¥é—­åŒ…ä¸ºé€ƒé€¸é—­åŒ…ï¼›</summary></entry><entry><title type="html">Error Handler</title><link href="https://www.boolvalue.com/error-handler.html" rel="alternate" type="text/html" title="Error Handler" /><published>2021-07-03T00:00:00+08:00</published><updated>2021-07-03T00:00:00+08:00</updated><id>https://www.boolvalue.com/error-handler</id><content type="html" xml:base="https://www.boolvalue.com/error-handler.html">&lt;h1 id=&quot;swift-é”™è¯¯å¤„ç†&quot;&gt;swift é”™è¯¯å¤„ç†&lt;/h1&gt;

&lt;h2 id=&quot;é”™è¯¯å®šä¹‰&quot;&gt;é”™è¯¯å®šä¹‰&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;enum XXXError: Error {
    case invalidSelection
    case outOfStock
}

// æŠ›å‡ºé”™è¯¯
throw XXXError.outOfStock
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;é”™è¯¯æŠ›å‡ºå‡½æ•°&quot;&gt;é”™è¯¯æŠ›å‡ºå‡½æ•°&lt;/h2&gt;

&lt;p&gt;åªæœ‰æŠ›å‡ºå‡½æ•°æ‰èƒ½ä¼ é€’é”™è¯¯&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func canThrowErrors() throws -&amp;gt; String {
    if (1 == 1) {
        throw XXXError.invalidSelection
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å¤„ç†é”™è¯¯&quot;&gt;å¤„ç†é”™è¯¯&lt;/h2&gt;

&lt;h3 id=&quot;do-catch-å¤„ç†é”™è¯¯&quot;&gt;do-catch å¤„ç†é”™è¯¯&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;do {
    print(&quot;æ‰§è¡Œå‡½æ•°&quot;)
    try canThrowErrors()
} catch {
    print(error)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;try-å¯é€‰é”™è¯¯&quot;&gt;try? å¯é€‰é”™è¯¯&lt;/h3&gt;

&lt;p&gt;è®¡ç®—è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼æŠ›å‡ºé”™è¯¯ï¼Œåˆ™xä¸ºnilã€‚é€šå¸¸å¯ä»¥å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if let&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;guard let&lt;/code&gt;ä½¿ç”¨&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let x = try? canThrowErrors()&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;try-ç¦ç”¨é”™è¯¯&quot;&gt;try! ç¦ç”¨é”™è¯¯&lt;/h3&gt;

&lt;p&gt;åœ¨ç¡®è®¤ä¸æ–¹æ³•ä¸ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºé”™è¯¯ä½¿ç”¨ï¼›&lt;/p&gt;

&lt;p&gt;å¦‚æœå®é™…æŠ›å‡ºé”™è¯¯ï¼Œåˆ™åœ¨è¿è¡Œæ—¶æ”¶åˆ°é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let x = try! canThrowErrors()&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;defer-æ¸…ç†æ“ä½œ&quot;&gt;defer æ¸…ç†æ“ä½œ&lt;/h3&gt;

&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥åœ¨ä»£ç æ‰§è¡Œç¦»å¼€å½“å‰ä»£ç å—ä¹‹å‰æ‰§è¡Œä¸€ç»„è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;æ— è®ºæ‰§è¡Œå¦‚ä½•ç¦»å¼€å½“å‰ä»£ç å—ï¼Œè¯¥è¯­å¥éƒ½å¯ä»¥è®©æ‚¨æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†â€”â€”æ— è®ºå®ƒæ˜¯å› ä¸ºæŠ›å‡ºé”™è¯¯è¿˜æ˜¯å› ä¸ºè¯¸å¦‚returnorä¹‹ç±»çš„è¯­å¥è€Œç¦»å¼€breakã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥æ¥ç¡®ä¿å…³é—­æ–‡ä»¶æè¿°ç¬¦å¹¶é‡Šæ”¾æ‰‹åŠ¨åˆ†é…çš„å†…å­˜ã€‚&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func processFile(fileName: String) throws {
    let file = open(fileName)
    defer { // ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åæ¸…ç†
        close(file)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">swift é”™è¯¯å¤„ç†</summary></entry><entry><title type="html">Closure</title><link href="https://www.boolvalue.com/closure.html" rel="alternate" type="text/html" title="Closure" /><published>2021-07-03T00:00:00+08:00</published><updated>2021-07-03T00:00:00+08:00</updated><id>https://www.boolvalue.com/closure</id><content type="html" xml:base="https://www.boolvalue.com/closure.html">&lt;h1 id=&quot;é—­åŒ…ä¼˜åŒ–&quot;&gt;é—­åŒ…ä¼˜åŒ–ï¼š&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä»ä¸Šä¸‹æ–‡æ¨æ–­ï¼›å³å¯ä»¥ä¼˜åŒ–æ‰Stringã€Boolç­‰ç±»å‹ {s1, s2 in return s1 &amp;gt; s2}&lt;/li&gt;
  &lt;li&gt;å•è¡¨è¾¾å¼é—­åŒ…çš„éšå¼è¿”å›ï¼Œå¯ä»¥ä¼˜åŒ–æ–¹æ³•ä»…æœ‰å•è¡Œçš„è¿”å›å…³é”®å­—ï¼Œå³returnå…³é”®å­— {s1, s2 in s1 &amp;gt; s2}&lt;/li&gt;
  &lt;li&gt;ç®€å†™å‚æ•°åç§°ï¼Œswiftä¼šè‡ªåŠ¨ä¸ºå†…è”é—­åŒ…æä¾›é€Ÿè®°å‚æ•°åç§°ï¼Œå¯ç”¨äºé€šè¿‡$0/$1ç­‰è¿›è¡Œå€¼å¼•ç”¨ {$0, $1 in $0 &amp;gt; $1}&lt;/li&gt;
  &lt;li&gt;å½“é—­åŒ…è¶³å¤Ÿç®€æ´ï¼Œå¦‚ in $0 &amp;lt; $1ï¼Œå…³é”®å­—inä¹Ÿå¯ä»¥çœç•¥ {$0 &amp;gt; $1}&lt;/li&gt;
  &lt;li&gt;å½“é—­åŒ…ä»…ä¸ºæ•°å­¦è¡¨è¾¾å¼ï¼Œç”šè‡³å¯ä»¥ä¼˜åŒ–å…¥å‚ï¼Œä»…é€‚ç”¨è¿ç®—ç¬¦æ–¹æ³•è¿›è¡Œå®ç° &amp;gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;names&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ni&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;he&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;garbage&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;folshift&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// é—­åŒ…&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;s2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s2&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">é—­åŒ…ä¼˜åŒ–ï¼š å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä»ä¸Šä¸‹æ–‡æ¨æ–­ï¼›å³å¯ä»¥ä¼˜åŒ–æ‰Stringã€Boolç­‰ç±»å‹ {s1, s2 in return s1 &amp;gt; s2} å•è¡¨è¾¾å¼é—­åŒ…çš„éšå¼è¿”å›ï¼Œå¯ä»¥ä¼˜åŒ–æ–¹æ³•ä»…æœ‰å•è¡Œçš„è¿”å›å…³é”®å­—ï¼Œå³returnå…³é”®å­— {s1, s2 in s1 &amp;gt; s2} ç®€å†™å‚æ•°åç§°ï¼Œswiftä¼šè‡ªåŠ¨ä¸ºå†…è”é—­åŒ…æä¾›é€Ÿè®°å‚æ•°åç§°ï¼Œå¯ç”¨äºé€šè¿‡$0/$1ç­‰è¿›è¡Œå€¼å¼•ç”¨ {$0, $1 in $0 &amp;gt; $1} å½“é—­åŒ…è¶³å¤Ÿç®€æ´ï¼Œå¦‚ in $0 &amp;lt; $1ï¼Œå…³é”®å­—inä¹Ÿå¯ä»¥çœç•¥ {$0 &amp;gt; $1} å½“é—­åŒ…ä»…ä¸ºæ•°å­¦è¡¨è¾¾å¼ï¼Œç”šè‡³å¯ä»¥ä¼˜åŒ–å…¥å‚ï¼Œä»…é€‚ç”¨è¿ç®—ç¬¦æ–¹æ³•è¿›è¡Œå®ç° &amp;gt; var names = [&quot;ni&quot;, &quot;he&quot;, &quot;garbage&quot;, &quot;folshift&quot;] var reversedNames = names.sorted (by: // é—­åŒ… { (s1: String, s2: String) -&amp;gt; Bool in return s1 &amp;gt; s2 } )</summary></entry><entry><title type="html">Auto Closure</title><link href="https://www.boolvalue.com/auto-closure.html" rel="alternate" type="text/html" title="Auto Closure" /><published>2021-07-03T00:00:00+08:00</published><updated>2021-07-03T00:00:00+08:00</updated><id>https://www.boolvalue.com/auto-closure</id><content type="html" xml:base="https://www.boolvalue.com/auto-closure.html">&lt;h1 id=&quot;è‡ªåŠ¨é—­åŒ…&quot;&gt;è‡ªåŠ¨é—­åŒ…&lt;/h1&gt;
&lt;p&gt;ç”¨äºä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‚æ•°çš„è¡¨è¾¾å¼ï¼Œé—­åŒ…ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›åŒ…è£…åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼çš„å€¼&lt;/p&gt;

&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;çœç•¥é—­åŒ…èŠ±æ‹¬å·ï¼Œç”¨æ™®é€šè¡¨è¾¾å¼æ¥æ›¿ä»£æ˜¾ç¤ºé—­åŒ…&lt;/li&gt;
  &lt;li&gt;å»¶æ—¶æ±‚å€¼/æ‰§è¡Œ&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customersInLine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;chirs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Alex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Ewa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Barry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Daniella&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…ï¼šæ‰€è°“è‡ªåŠ¨é—­åŒ…ï¼Œå°±æ˜¯è°ƒç”¨æ—¶å€™æ‰æ‰§è¡Œé—­åŒ…å†…ä»£ç &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProviderClosure&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ä¼˜åŒ–è‡ªåŠ¨é—­åŒ…ï¼š()ã€è¿”å›å€¼ã€in å‡è‡ªåŠ¨æ¨åˆ°ä¼˜åŒ–&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;providerClosure&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è‡ªåŠ¨é—­åŒ…å»¶æ—¶æ±‚å€¼&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;providerClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œè¯¥é—­åŒ…ä¸ºæ˜¾å¼é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å°†å…¥å‚é€šè¿‡ @autoclosure è½¬åŒ–ä¸ºè‡ªåŠ¨é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;serveAuto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@autoclosure&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)})&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ˜¾å¼é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;serveAuto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å¯ä»¥å¢åŠ ä»£ç å¤æ‚åº¦å‘¢ï¼ŒğŸ˜€&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è‡ªåŠ¨é€ƒé€¸é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;autoEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@autoclosure&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ•è·&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;autoEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨æ•è·é€ƒé€¸é—­åŒ…&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cusPro&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;now get &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cusPro&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨æ•è·çš„è‡ªåŠ¨é€ƒé€¸é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">è‡ªåŠ¨é—­åŒ… ç”¨äºä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‚æ•°çš„è¡¨è¾¾å¼ï¼Œé—­åŒ…ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›åŒ…è£…åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼çš„å€¼ ä¼˜ç‚¹ï¼š çœç•¥é—­åŒ…èŠ±æ‹¬å·ï¼Œç”¨æ™®é€šè¡¨è¾¾å¼æ¥æ›¿ä»£æ˜¾ç¤ºé—­åŒ… å»¶æ—¶æ±‚å€¼/æ‰§è¡Œ</summary></entry><entry><title type="html">Swift Concurrency</title><link href="https://www.boolvalue.com/swift-concurrency.html" rel="alternate" type="text/html" title="Swift Concurrency" /><published>2021-07-01T00:00:00+08:00</published><updated>2021-07-01T00:00:00+08:00</updated><id>https://www.boolvalue.com/swift-concurrency</id><content type="html" xml:base="https://www.boolvalue.com/swift-concurrency.html">&lt;h1 id=&quot;swift55-å¹¶å‘&quot;&gt;swift5.5 å¹¶å‘&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½¿ç”¨Playgroundå®è·µswift5.5 concurrency ç« èŠ‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import Cocoa
import Foundation
import Darwin


/*
 å¹¶å‘ concurrency

 'async(priority:operation:)' is deprecated: `async` was replaced by `Task.init` and will be removed shortly.
 async -&amp;gt; Task.init

 'get()' is deprecated: get() has been replaced by .value
 get() -&amp;gt; value

 */

// æ¨¡æ‹Ÿå¼‚æ­¥ä¸‹è½½å›¾ç‰‡
func downloadPhoto(named: String) async -&amp;gt; Any {
    await Task.sleep(1 * 1_000_000_000)
    return &quot;å›¾ç‰‡ =&amp;gt; &quot; + named
}

func show(photo: Any) {
    print(photo)
}


// å®šä¹‰å’Œè°ƒç”¨å¼‚æ­¥å‡½æ•°
func listPhotos(inGallery name: String) async -&amp;gt; [String] {
    await Task.sleep(2 * 1_000_000_000) // 2 seconds
    let resutlt = [&quot;some asynchronous networking code ...&quot;, &quot;mock 1&quot;, &quot;mock 2&quot;, &quot;mock 3&quot;]
    return resutlt
}

// è°ƒç”¨å¼‚æ­¥å‡½æ•°
async {
    let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;) // è°ƒç”¨å¼‚æ­¥å‡½æ•°
    let sorteNames = photoNames.sorted()
    let name = sorteNames[0]
    let photo = await downloadPhoto(named: name)
    show(photo: photo)
}


// å¼‚æ­¥åºåˆ—è¿­ä»£
let handle = FileHandle.standardInput
async { // avoid async call in a function does not support concurrency
    for try await line in handle.bytes.lines {
        print(line)
    }
}

// å¹¶è¡Œè°ƒç”¨å¼‚æ­¥å‡½æ•°
async {
    // ä¸²è¡Œå¼‚æ­¥
    let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;) // è°ƒç”¨å¼‚æ­¥å‡½æ•°
    let firstPhoto = await downloadPhoto(named: photoNames[0])
    let secondPhoto = await downloadPhoto(named: photoNames[1])
    let photos = [firstPhoto, secondPhoto]
    show(photo: photos)

    // å¹¶è¡Œå¼‚æ­¥
    async let firstPhotoC = downloadPhoto(named: photoNames[0])
    async let secondPhotoC = downloadPhoto(named: photoNames[1])
    let photosC = await [firstPhotoC, secondPhotoC]
    show(photo: photosC)
}


// ä»»åŠ¡å’Œä»»åŠ¡ç»„ï¼šç»“æ„åŒ–å¹¶å‘ï¼Œçˆ¶å­ä»»åŠ¡
async {
    await withTaskGroup(of: String.self, body: { taskGroup in //Data.self -&amp;gt; ç±»æ¯”oc [xxx class]
        let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;)
        for name in photoNames {
            taskGroup.async(priority: .default, operation: { // å¯ä»¥æ ¹æ®ä»»åŠ¡æŒ‡å®šä¼˜å…ˆçº§
                await downloadPhoto(named: name) as! String
            })
        }
    })
}

// éç»“æ„åŒ–å¹¶å‘
Task.init(priority: .default) {
    let handle = Task.init(priority: .default) {
        return await listPhotos(inGallery: &quot;Summer Vacation&quot;)
    }
    let result = await handle.value
    show(photo: result)

    // ä¸‹ä¸€ä¸ªå°ç« èŠ‚ï¼šä»»åŠ¡å–æ¶ˆ
    if handle.isCancelled {
        handle.cancel() // æ‰‹åŠ¨å–æ¶ˆä»»åŠ¡
    }
}


// ä»»åŠ¡å–æ¶ˆğŸ‘†[çœ‹ä¸Šé¢]


/*
 Actor å¼•ç”¨ç±»å‹
 data reaces avoid
 let is safe for concurrency class


 */

// actor åˆ›å»ºçš„ç»“æ„ä½“ã€ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªtaskè®¿é—®å…¶å¯å˜çŠ¶æ€ã€‘
actor TemperatureLogger {
    let label: String
    var measurements: [Int]
    private(set) var max: Int // å¯èƒ½æš‚åœçš„ç‚¹

    init(label: String, measurement: Int) {
        self.label = label
        self.measurements = [measurement]
        self.max = measurement
    }
}

// æ‰©å±•
extension TemperatureLogger {
    func update(with measurement: Int) { // ä¸åŒ…å«ç»ˆç«¯ï¼Œä¼šè®¿é—®é”™è¯¯
        measurements.append(measurement)
        if measurement &amp;gt; max {
            max = measurement
        }
    }
}

let logger = TemperatureLogger(label: &quot;Outdoors&quot;, measurement: 25)
Task.init(priority: .default, operation: {
    // å‚ä¸è€…éš”ç¦» actir isolation
    print(await logger.max)
//    print(logger.max) // Expression is 'async' but is not marked with 'await'
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">swift5.5 å¹¶å‘</summary></entry></feed>