<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://www.boolvalue.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.boolvalue.com/" rel="alternate" type="text/html" /><updated>2021-07-06T04:34:31+08:00</updated><id>https://www.boolvalue.com/feed.xml</id><title type="html">å¸ƒå°”ä¸–ç•Œ</title><subtitle>I find I'm so excited. I can barely sit still or hold a thought in my head. I think it the excitement only a free man can feel, a free man at the start of a long journey whose conclusion is uncertain. I hope I can make it across the border. I hope to see my friend, and shake his hand. I hope the Pacific is as blue as it has been in my dreams. I hope.
</subtitle><author><name>WANG</name></author><entry><title type="html">Flutter Sksl Shader</title><link href="https://www.boolvalue.com/flutter-sksl-shader.html" rel="alternate" type="text/html" title="Flutter Sksl Shader" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/Flutter-Sksl-shader</id><content type="html" xml:base="https://www.boolvalue.com/flutter-sksl-shader.html">&lt;h1 id=&quot;åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå‡å°‘ç€è‰²å™¨ç¼–è¯‘å¡é¡¿&quot;&gt;åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå‡å°‘ç€è‰²å™¨ç¼–è¯‘å¡é¡¿&lt;/h1&gt;

&lt;h2 id=&quot;å…³è”çŸ¥è¯†&quot;&gt;å…³è”çŸ¥è¯†&lt;/h2&gt;

&lt;h3 id=&quot;skslskia-shading-lanaguage&quot;&gt;&lt;a href=&quot;https://github.com/google/skia/blob/main/src/sksl/README&quot;&gt;SkSL(Skia Shading Lanaguage)&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;SkSL (â€œSkia Shading Languageâ€) is a variant of GLSL which is used as Skiaâ€™s
internal shading langua ge. SkSL is, at its heart, a single standardized version
of GLSL which avoids all of the various version and dialect differences found
in GLSL â€œin the wildâ€, but it does bring a few of its own changes to the table.&lt;/p&gt;

&lt;p&gt;Skia uses the SkSL compiler to convert SkSL code to GLSL, GLSL ES, or SPIR-V
before handing it over to the graphics driver.&lt;/p&gt;

&lt;h3 id=&quot;glsl&quot;&gt;GLSL&lt;/h3&gt;

&lt;p&gt;GLSL - OpenGL Shading Language ä¹Ÿç§°ä½œ GLslangï¼Œæ˜¯ä¸€ä¸ªä»¥Cè¯­è¨€ä¸ºåŸºç¡€çš„é«˜é˜¶ç€è‰²è¯­è¨€ã€‚å®ƒæ˜¯ç”± OpenGL ARB æ‰€å»ºç«‹ï¼Œæä¾›å¼€å‘è€…å¯¹ç»˜å›¾ç®¡çº¿æ›´å¤šçš„ç›´æ¥æ§åˆ¶ï¼Œè€Œæ— éœ€ä½¿ç”¨æ±‡ç¼–è¯­è¨€æˆ–ç¡¬ä»¶è§„æ ¼è¯­è¨€ã€‚&lt;/p&gt;

&lt;p&gt;éšç€è¿‘å¹´æ¥ç»˜å›¾å¡çš„è¿›æ­¥ï¼Œ å·²åœ¨æ¸²æŸ“ç®¡çº¿ä¸­çš„é¡¶ç‚¹ï¼ˆvertexï¼‰å’Œç‰‡æ–­ï¼ˆfragmentï¼‰å±‚æ¬¡ä¸­ï¼ŒåŠ å…¥æ›´å…·å¼¹æ€§çš„æ–°åŠŸèƒ½ã€‚ è¾¾åˆ°åœ¨è¿™ä¸ªå±‚æ¬¡ä¸­ï¼Œä½¿ç”¨ç‰‡æ–­å’Œé¡¶ç‚¹ç€è‰²å™¨çš„å¯ç¼–ç¨‹æ€§ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆè¿™ä¸ªåŠŸèƒ½æ˜¯ä»¥ç»„åˆè¯­è¨€æ’°å†™ç€è‰²å™¨æ¥è¾¾åˆ°çš„ã€‚ç»„åˆè¯­è¨€å¯¹å¼€å‘è€…çš„ä½¿ç”¨æ˜¯ä¸ç›´è§‚è€Œå¤æ‚çš„ã€‚OpenGL ARB å»ºç«‹äº† OpenGL ç€è‰²è¯­è¨€ï¼Œä¸º GPU çš„ç¨‹å¼è®¾è®¡æä¾›æ›´åŠ ç›´è§‚çš„æ–¹æ³•ï¼Œå½“ç»´æŠ¤å¼€æ”¾æ ‡å‡†çš„æ—¶å€™ï¼Œå°±æœ‰åŠ©äºå¸¦åŠ¨ OpenGL çš„å†å²ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆ OpenGL 1.5 æ˜¯ä»¥æ‰©å……å½¢å¼å¼•å…¥ï¼Œåæ¥ OpenGL ARB åœ¨ OpenGL 2.0 æ ¸å¿ƒä¸­æ­£å¼çº³å…¥ GLSLã€‚è‡ª 1992 å¹´å»ºç«‹çš„OpenGL 1.0 èµ·ï¼ŒOpenGL 2.0 æ˜¯ç¬¬ä¸€ä¸ª OpenGL çš„å¤§ä¿®æ”¹ç‰ˆã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ GLSL æœ‰å¦‚ä¸‹å¥½å¤„ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å…·æœ‰è·¨å¹³å°çš„ç›¸å®¹æ€§ï¼ŒåŒ…æ‹¬ Macintoshã€Windows å’Œ Linux ç­‰æ“ä½œç³»ç»Ÿã€‚&lt;/li&gt;
  &lt;li&gt;æ‰€æœ‰æ”¯æ´ OpenGL ç€è‰²è¯­è¨€çš„ç»˜å›¾å¡ï¼Œéƒ½å¯ä»¥ç”¨æ¥ç¼–å†™ç€è‰²å™¨ã€‚&lt;/li&gt;
  &lt;li&gt;å…è®¸å‚å•†ä¸ºç‰¹å®šçš„ç»˜å›¾å¡äº§ç”Ÿæœ€ä½³åŒ–çš„ä»£ç ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ç€è‰²å™¨&quot;&gt;ç€è‰²å™¨&lt;/h3&gt;

&lt;p&gt;è®¡ç®—æœºå›¾å½¢å­¦é¢†åŸŸä¸­ï¼Œç€è‰²å™¨ï¼ˆè‹±è¯­ï¼šshaderï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼ŒåŸæœ¬ç”¨äºè¿›è¡Œå›¾åƒçš„æµ“æ·¡å¤„ç†ï¼ˆè®¡ç®—å›¾åƒä¸­çš„å…‰ç…§ã€äº®åº¦ã€é¢œè‰²ç­‰ï¼‰ï¼Œä½†è¿‘æ¥ï¼Œå®ƒä¹Ÿè¢«ç”¨äºå®Œæˆå¾ˆå¤šä¸åŒé¢†åŸŸçš„å·¥ä½œï¼Œæ¯”å¦‚å¤„ç†CGç‰¹æ•ˆã€è¿›è¡Œä¸æµ“æ·¡å¤„ç†æ— å…³çš„è§†é¢‘åæœŸå¤„ç†ã€ç”šè‡³ç”¨äºä¸€äº›ä¸è®¡ç®—æœºå›¾å½¢å­¦æ— å…³çš„å…¶å®ƒé¢†åŸŸã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ç€è‰²å™¨åœ¨å›¾å½¢ç¡¬ä»¶ä¸Šè®¡ç®—æ¸²æŸ“æ•ˆæœæœ‰å¾ˆé«˜çš„è‡ªç”±åº¦ã€‚å°½ç®¡ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œä½†ç›®å‰å¤§å¤šæ•°ç€è‰²å™¨æ˜¯é’ˆå¯¹GPUå¼€å‘çš„ã€‚GPUçš„å¯ç¼–ç¨‹ç»˜å›¾ç®¡çº¿å·²ç»å…¨é¢å–ä»£ä¼ ç»Ÿçš„å›ºå®šç®¡çº¿ï¼Œå¯ä»¥ä½¿ç”¨ç€è‰²å™¨è¯­è¨€å¯¹å…¶ç¼–ç¨‹ã€‚æ„æˆæœ€ç»ˆå›¾åƒçš„åƒç´ ã€é¡¶ç‚¹ã€çº¹ç†ï¼Œå®ƒä»¬çš„ä½ç½®ã€è‰²ç›¸ã€é¥±å’Œåº¦ã€äº®åº¦ã€å¯¹æ¯”åº¦ä¹Ÿéƒ½å¯ä»¥åˆ©ç”¨ç€è‰²å™¨ä¸­å®šä¹‰çš„ç®—æ³•è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚è°ƒç”¨ç€è‰²å™¨çš„å¤–éƒ¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å®ƒå‘ç€è‰²å™¨æä¾›çš„å¤–éƒ¨å˜é‡ã€çº¹ç†æ¥ä¿®æ”¹è¿™äº›ç€è‰²å™¨ä¸­çš„å‚æ•°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è°ƒè¯•è¿‡ç¨‹&quot;&gt;è°ƒè¯•è¿‡ç¨‹&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸‹è½½é¡¹ç›®&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flutter run --profile&lt;/code&gt;è¿è¡Œåº”ç”¨åˆ°çœŸæœº&lt;/li&gt;
  &lt;li&gt;æ‰§è¡Œé¡¹ç›®ï¼Œè®°å½•å¡æ®µï¼ŒæŸ¥çœ‹åˆ†æ&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;ä¼˜åŒ–åŸç†&quot;&gt;ä¼˜åŒ–åŸç†&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;ä»£ç ä¼˜åŒ–ï¼Œå‡å°‘é‡å¤æ¸²æŸ“æ¬¡æ•°ã€å‡å°‘ç¦»å±æ¸²æŸ“æ“ä½œ&lt;/li&gt;
  &lt;li&gt;ç€è‰²å™¨ä¼˜åŒ–ï¼Œä½¿ç”¨ç€è‰²å™¨é¢„ç¼–è¯‘å‡å°‘ç€è‰²å™¨æ¸²æŸ“å¡é¡¿&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;ç€è‰²å™¨ä¼˜åŒ–æ–¹æ¡ˆ&quot;&gt;ç€è‰²å™¨ä¼˜åŒ–æ–¹æ¡ˆ&lt;/h2&gt;

&lt;h3 id=&quot;ä½¿ç”¨skia-metalé¢„ç¼–è¯‘devåˆ†æ”¯&quot;&gt;ä½¿ç”¨SKIA-Metalé¢„ç¼–è¯‘[devåˆ†æ”¯]&lt;/h3&gt;

&lt;p&gt;Flutter 2.3.0-16.0.pre â€¢ channel dev&lt;/p&gt;

&lt;p&gt;æ”¯æŒiOSçš„Metalç€è‰²å™¨é¢„ç¼–è¯‘&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨flutter-skiaæ¸²æŸ“å¼•æ“ä¸æ¨è&quot;&gt;ä½¿ç”¨Flutter-SKIAæ¸²æŸ“å¼•æ“[ä¸æ¨è]&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨stableåˆ†æ”¯ï¼Œå› ä¸ºstableåˆ†æ”¯ç›®å‰ä»…æ”¯æŒAndroidçš„ç€è‰²å™¨æ¸²æŸ“ï¼›&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥éœ€è¦ä½¿ç”¨æ”¯æŒskiaæ¸²æŸ“çš„flutter-engineï¼Œéœ€è¦é™ä½flutterçš„å¼•æ“ç‰ˆæœ¬ï¼Œ1.2ä»¥å‰åº”è¯¥éƒ½æ˜¯æ”¯æŒflutter-skiaæ¸²æŸ“çš„&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒé“¾æ¥&quot;&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/acoutts/flutter-engines-no-metal&quot;&gt;æ²¡æœ‰metalçš„å¼•æ“&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/flutter/flutter/issues/79298&quot;&gt;æ”¯æŒè¿è¡Œmetal&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/flutter/flutter/issues/32170&quot;&gt;è‡ªåŠ¨å¯æ‰©å±•ç€è‰²å™¨é¢„çƒ­-iOS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/flutter/flutter/issues/60267&quot;&gt;iOS jankè§£å†³æ–¹æ¡ˆè®¨è®º&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>WANG</name></author><summary type="html">åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå‡å°‘ç€è‰²å™¨ç¼–è¯‘å¡é¡¿</summary></entry><entry><title type="html">Auto Closure</title><link href="https://www.boolvalue.com/auto-closure.html" rel="alternate" type="text/html" title="Auto Closure" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/auto-closure</id><content type="html" xml:base="https://www.boolvalue.com/auto-closure.html">&lt;h1 id=&quot;è‡ªåŠ¨é—­åŒ…&quot;&gt;è‡ªåŠ¨é—­åŒ…&lt;/h1&gt;
&lt;p&gt;ç”¨äºä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‚æ•°çš„è¡¨è¾¾å¼ï¼Œé—­åŒ…ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›åŒ…è£…åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼çš„å€¼&lt;/p&gt;

&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;çœç•¥é—­åŒ…èŠ±æ‹¬å·ï¼Œç”¨æ™®é€šè¡¨è¾¾å¼æ¥æ›¿ä»£æ˜¾ç¤ºé—­åŒ…&lt;/li&gt;
  &lt;li&gt;å»¶æ—¶æ±‚å€¼/æ‰§è¡Œ&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customersInLine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;chirs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Alex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Ewa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Barry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Daniella&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é—­åŒ…ï¼šæ‰€è°“è‡ªåŠ¨é—­åŒ…ï¼Œå°±æ˜¯è°ƒç”¨æ—¶å€™æ‰æ‰§è¡Œé—­åŒ…å†…ä»£ç &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProviderClosure&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ä¼˜åŒ–è‡ªåŠ¨é—­åŒ…ï¼š()ã€è¿”å›å€¼ã€in å‡è‡ªåŠ¨æ¨åˆ°ä¼˜åŒ–&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;providerClosure&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è‡ªåŠ¨é—­åŒ…å»¶æ—¶æ±‚å€¼&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;providerClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œè¯¥é—­åŒ…ä¸ºæ˜¾å¼é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å°†å…¥å‚é€šè¿‡ @autoclosure è½¬åŒ–ä¸ºè‡ªåŠ¨é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;serveAuto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@autoclosure&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;now serving &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)})&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ˜¾å¼é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;serveAuto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å¯ä»¥å¢åŠ ä»£ç å¤æ‚åº¦å‘¢ï¼ŒğŸ˜€&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è‡ªåŠ¨é€ƒé€¸é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;autoEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@autoclosure&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ•è·&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;autoEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customersInLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨æ•è·é€ƒé€¸é—­åŒ…&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cusPro&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;now get &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cusPro&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨æ•è·çš„è‡ªåŠ¨é€ƒé€¸é—­åŒ…&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">è‡ªåŠ¨é—­åŒ… ç”¨äºä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‚æ•°çš„è¡¨è¾¾å¼ï¼Œé—­åŒ…ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›åŒ…è£…åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼çš„å€¼ ä¼˜ç‚¹ï¼š çœç•¥é—­åŒ…èŠ±æ‹¬å·ï¼Œç”¨æ™®é€šè¡¨è¾¾å¼æ¥æ›¿ä»£æ˜¾ç¤ºé—­åŒ… å»¶æ—¶æ±‚å€¼/æ‰§è¡Œ</summary></entry><entry><title type="html">Closure</title><link href="https://www.boolvalue.com/closure.html" rel="alternate" type="text/html" title="Closure" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/closure</id><content type="html" xml:base="https://www.boolvalue.com/closure.html">&lt;h1 id=&quot;é—­åŒ…ä¼˜åŒ–&quot;&gt;é—­åŒ…ä¼˜åŒ–ï¼š&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä»ä¸Šä¸‹æ–‡æ¨æ–­ï¼›å³å¯ä»¥ä¼˜åŒ–æ‰Stringã€Boolç­‰ç±»å‹ {s1, s2 in return s1 &amp;gt; s2}&lt;/li&gt;
  &lt;li&gt;å•è¡¨è¾¾å¼é—­åŒ…çš„éšå¼è¿”å›ï¼Œå¯ä»¥ä¼˜åŒ–æ–¹æ³•ä»…æœ‰å•è¡Œçš„è¿”å›å…³é”®å­—ï¼Œå³returnå…³é”®å­— {s1, s2 in s1 &amp;gt; s2}&lt;/li&gt;
  &lt;li&gt;ç®€å†™å‚æ•°åç§°ï¼Œswiftä¼šè‡ªåŠ¨ä¸ºå†…è”é—­åŒ…æä¾›é€Ÿè®°å‚æ•°åç§°ï¼Œå¯ç”¨äºé€šè¿‡$0/$1ç­‰è¿›è¡Œå€¼å¼•ç”¨ {$0, $1 in $0 &amp;gt; $1}&lt;/li&gt;
  &lt;li&gt;å½“é—­åŒ…è¶³å¤Ÿç®€æ´ï¼Œå¦‚ in $0 &amp;lt; $1ï¼Œå…³é”®å­—inä¹Ÿå¯ä»¥çœç•¥ {$0 &amp;gt; $1}&lt;/li&gt;
  &lt;li&gt;å½“é—­åŒ…ä»…ä¸ºæ•°å­¦è¡¨è¾¾å¼ï¼Œç”šè‡³å¯ä»¥ä¼˜åŒ–å…¥å‚ï¼Œä»…é€‚ç”¨è¿ç®—ç¬¦æ–¹æ³•è¿›è¡Œå®ç° &amp;gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;names&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ni&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;he&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;garbage&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;folshift&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// é—­åŒ…&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;s2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s2&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">é—­åŒ…ä¼˜åŒ–ï¼š å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä»ä¸Šä¸‹æ–‡æ¨æ–­ï¼›å³å¯ä»¥ä¼˜åŒ–æ‰Stringã€Boolç­‰ç±»å‹ {s1, s2 in return s1 &amp;gt; s2} å•è¡¨è¾¾å¼é—­åŒ…çš„éšå¼è¿”å›ï¼Œå¯ä»¥ä¼˜åŒ–æ–¹æ³•ä»…æœ‰å•è¡Œçš„è¿”å›å…³é”®å­—ï¼Œå³returnå…³é”®å­— {s1, s2 in s1 &amp;gt; s2} ç®€å†™å‚æ•°åç§°ï¼Œswiftä¼šè‡ªåŠ¨ä¸ºå†…è”é—­åŒ…æä¾›é€Ÿè®°å‚æ•°åç§°ï¼Œå¯ç”¨äºé€šè¿‡$0/$1ç­‰è¿›è¡Œå€¼å¼•ç”¨ {$0, $1 in $0 &amp;gt; $1} å½“é—­åŒ…è¶³å¤Ÿç®€æ´ï¼Œå¦‚ in $0 &amp;lt; $1ï¼Œå…³é”®å­—inä¹Ÿå¯ä»¥çœç•¥ {$0 &amp;gt; $1} å½“é—­åŒ…ä»…ä¸ºæ•°å­¦è¡¨è¾¾å¼ï¼Œç”šè‡³å¯ä»¥ä¼˜åŒ–å…¥å‚ï¼Œä»…é€‚ç”¨è¿ç®—ç¬¦æ–¹æ³•è¿›è¡Œå®ç° &amp;gt; var names = [&quot;ni&quot;, &quot;he&quot;, &quot;garbage&quot;, &quot;folshift&quot;] var reversedNames = names.sorted (by: // é—­åŒ… { (s1: String, s2: String) -&amp;gt; Bool in return s1 &amp;gt; s2 } )</summary></entry><entry><title type="html">Error Handler</title><link href="https://www.boolvalue.com/error-handler.html" rel="alternate" type="text/html" title="Error Handler" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/error-handler</id><content type="html" xml:base="https://www.boolvalue.com/error-handler.html">&lt;h1 id=&quot;swift-é”™è¯¯å¤„ç†&quot;&gt;swift é”™è¯¯å¤„ç†&lt;/h1&gt;

&lt;h2 id=&quot;é”™è¯¯å®šä¹‰&quot;&gt;é”™è¯¯å®šä¹‰&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;enum XXXError: Error {
    case invalidSelection
    case outOfStock
}

// æŠ›å‡ºé”™è¯¯
throw XXXError.outOfStock
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;é”™è¯¯æŠ›å‡ºå‡½æ•°&quot;&gt;é”™è¯¯æŠ›å‡ºå‡½æ•°&lt;/h2&gt;

&lt;p&gt;åªæœ‰æŠ›å‡ºå‡½æ•°æ‰èƒ½ä¼ é€’é”™è¯¯&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func canThrowErrors() throws -&amp;gt; String {
    if (1 == 1) {
        throw XXXError.invalidSelection
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å¤„ç†é”™è¯¯&quot;&gt;å¤„ç†é”™è¯¯&lt;/h2&gt;

&lt;h3 id=&quot;do-catch-å¤„ç†é”™è¯¯&quot;&gt;do-catch å¤„ç†é”™è¯¯&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;do {
    print(&quot;æ‰§è¡Œå‡½æ•°&quot;)
    try canThrowErrors()
} catch {
    print(error)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;try-å¯é€‰é”™è¯¯&quot;&gt;try? å¯é€‰é”™è¯¯&lt;/h3&gt;

&lt;p&gt;è®¡ç®—è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼æŠ›å‡ºé”™è¯¯ï¼Œåˆ™xä¸ºnilã€‚é€šå¸¸å¯ä»¥å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if let&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;guard let&lt;/code&gt;ä½¿ç”¨&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let x = try? canThrowErrors()&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;try-ç¦ç”¨é”™è¯¯&quot;&gt;try! ç¦ç”¨é”™è¯¯&lt;/h3&gt;

&lt;p&gt;åœ¨ç¡®è®¤ä¸æ–¹æ³•ä¸ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºé”™è¯¯ä½¿ç”¨ï¼›&lt;/p&gt;

&lt;p&gt;å¦‚æœå®é™…æŠ›å‡ºé”™è¯¯ï¼Œåˆ™åœ¨è¿è¡Œæ—¶æ”¶åˆ°é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let x = try! canThrowErrors()&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;defer-æ¸…ç†æ“ä½œ&quot;&gt;defer æ¸…ç†æ“ä½œ&lt;/h3&gt;

&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥åœ¨ä»£ç æ‰§è¡Œç¦»å¼€å½“å‰ä»£ç å—ä¹‹å‰æ‰§è¡Œä¸€ç»„è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;æ— è®ºæ‰§è¡Œå¦‚ä½•ç¦»å¼€å½“å‰ä»£ç å—ï¼Œè¯¥è¯­å¥éƒ½å¯ä»¥è®©æ‚¨æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†â€”â€”æ— è®ºå®ƒæ˜¯å› ä¸ºæŠ›å‡ºé”™è¯¯è¿˜æ˜¯å› ä¸ºè¯¸å¦‚returnorä¹‹ç±»çš„è¯­å¥è€Œç¦»å¼€breakã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥æ¥ç¡®ä¿å…³é—­æ–‡ä»¶æè¿°ç¬¦å¹¶é‡Šæ”¾æ‰‹åŠ¨åˆ†é…çš„å†…å­˜ã€‚&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func processFile(fileName: String) throws {
    let file = open(fileName)
    defer { // ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åæ¸…ç†
        close(file)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">swift é”™è¯¯å¤„ç†</summary></entry><entry><title type="html">Escape Closure</title><link href="https://www.boolvalue.com/escape-closure.html" rel="alternate" type="text/html" title="Escape Closure" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/escape-closure</id><content type="html" xml:base="https://www.boolvalue.com/escape-closure.html">&lt;h1 id=&quot;é€ƒé€¸é—­åŒ…&quot;&gt;é€ƒé€¸é—­åŒ…ï¼š&lt;/h1&gt;
&lt;p&gt;é—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œé—­åŒ…åœ¨å‡½æ•°è¿”å›åæ‰æ‰§è¡Œï¼Œè¯¥é—­åŒ…ä¸ºé€ƒé€¸é—­åŒ…ï¼›&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ @escaping ä¿®é¥°,è¡¨æ˜é—­åŒ…å…è®¸é€ƒé€¸ï¼Œå¦‚æœæƒ³åœ¨å¤–éƒ¨ä½¿ç”¨å‚æ•°é—­åŒ…ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¯¥å…³é”®å­—è¿›è¡Œæ ‡è®°ï¼Œå¦åˆ™ä¼šæœ‰ç¼–è¯‘é”™è¯¯&lt;/p&gt;

&lt;p&gt;ä¸ä½¿ç”¨ @escapingï¼Œè¿˜æƒ³å†å¤–éƒ¨æ•è·ä¼šæŠ¥ç¼–è¯‘é”™è¯¯
è½¬åŒ–éé€ƒé€¸å‚æ•°åˆ°æ³›å‹å‚æ•°éœ€è¦å…è®¸å®ƒé€ƒé€¸ï¼Œå³ä½¿ç”¨ @escaping æ ‡è®°&lt;/p&gt;

&lt;p&gt;é€ƒé€¸æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å°†é—­åŒ…ä¿å­˜åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ä¸­&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;é€ƒé€¸é—­åŒ…éœ€è¦æ˜¾ç¤ºçš„ä½¿ç”¨selfï¼Œå› ä¸ºåç»­é—­åŒ…è¿˜è¦æ‰§è¡Œï¼Œä½¿ç”¨selfå¢åŠ å¼•ç”¨è®¡æ•°ï¼Œé˜²æ­¢è¢«è°ƒç”¨çš„æ—¶å€™è¢«æ€æ­»&lt;/li&gt;
  &lt;li&gt;éé€ƒé€¸é—­åŒ…å¯ä»¥éšå¼å¼•ç”¨self&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @escaping&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;someFuncionWithEscapingClosure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;completionHandlers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">é€ƒé€¸é—­åŒ…ï¼š é—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œé—­åŒ…åœ¨å‡½æ•°è¿”å›åæ‰æ‰§è¡Œï¼Œè¯¥é—­åŒ…ä¸ºé€ƒé€¸é—­åŒ…ï¼›</summary></entry><entry><title type="html">Follow Closure</title><link href="https://www.boolvalue.com/follow-closure.html" rel="alternate" type="text/html" title="Follow Closure" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/follow-closure</id><content type="html" xml:base="https://www.boolvalue.com/follow-closure.html">&lt;h1 id=&quot;å°¾éšé—­åŒ…&quot;&gt;å°¾éšé—­åŒ…&lt;/h1&gt;

&lt;p&gt;åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;è‡ªå®šä¹‰å‡½æ•°ï¼Œå‡½æ•°ä¼ é€’çš„å‚æ•°åŒ…å«é—­åŒ…&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥æŒ‰ç…§æ­£å¸¸çš„è°ƒç”¨ï¼Œå°†é—­åŒ…å†™åœ¨å‡½æ•°å†…&lt;/li&gt;
  &lt;li&gt;å¦‚é—­åŒ…è¿‡å¤§ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºå°¾éšé—­åŒ…ï¼Œä»è€Œè¿›ä¸€æ­¥ä¼˜åŒ–ä»£ç &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°¾éšé—­åŒ…ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å°¾éšé—­åŒ…å¯ä»¥æ”¾åœ¨æ–¹æ³•func(){}å&lt;/li&gt;
  &lt;li&gt;åœ¨ä½¿ç”¨å°¾éšé—­åŒ…çš„æ—¶å€™ï¼Œå¦‚é—­åŒ…ä¸ºå”¯ä¸€å‚æ•°å¯ä»¥æŠŠfunc()çš„()çœç•¥&lt;/li&gt;
  &lt;li&gt;é€‚åˆå¤šè¡Œä¸šåŠ¡é€»è¾‘çš„é—­åŒ…&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;reversedNames3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sorted&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å°¾éšé—­åŒ…ï¼Œä¸èƒ½ä½¿ç”¨è¿ç®—ç¬¦ä¼˜åŒ–&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">å°¾éšé—­åŒ…</summary></entry><entry><title type="html">Swift Concurrency</title><link href="https://www.boolvalue.com/swift-concurrency.html" rel="alternate" type="text/html" title="Swift Concurrency" /><published>2021-07-06T00:00:00+08:00</published><updated>2021-07-06T00:00:00+08:00</updated><id>https://www.boolvalue.com/swift-concurrency</id><content type="html" xml:base="https://www.boolvalue.com/swift-concurrency.html">&lt;h1 id=&quot;swift55-å¹¶å‘&quot;&gt;swift5.5 å¹¶å‘&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½¿ç”¨Playgroundå®è·µswift5.5 concurrency ç« èŠ‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import Cocoa
import Foundation
import Darwin


/*
 å¹¶å‘ concurrency

 'async(priority:operation:)' is deprecated: `async` was replaced by `Task.init` and will be removed shortly.
 async -&amp;gt; Task.init

 'get()' is deprecated: get() has been replaced by .value
 get() -&amp;gt; value

 */

// æ¨¡æ‹Ÿå¼‚æ­¥ä¸‹è½½å›¾ç‰‡
func downloadPhoto(named: String) async -&amp;gt; Any {
    await Task.sleep(1 * 1_000_000_000)
    return &quot;å›¾ç‰‡ =&amp;gt; &quot; + named
}

func show(photo: Any) {
    print(photo)
}


// å®šä¹‰å’Œè°ƒç”¨å¼‚æ­¥å‡½æ•°
func listPhotos(inGallery name: String) async -&amp;gt; [String] {
    await Task.sleep(2 * 1_000_000_000) // 2 seconds
    let resutlt = [&quot;some asynchronous networking code ...&quot;, &quot;mock 1&quot;, &quot;mock 2&quot;, &quot;mock 3&quot;]
    return resutlt
}

// è°ƒç”¨å¼‚æ­¥å‡½æ•°
async {
    let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;) // è°ƒç”¨å¼‚æ­¥å‡½æ•°
    let sorteNames = photoNames.sorted()
    let name = sorteNames[0]
    let photo = await downloadPhoto(named: name)
    show(photo: photo)
}


// å¼‚æ­¥åºåˆ—è¿­ä»£
let handle = FileHandle.standardInput
async { // avoid async call in a function does not support concurrency
    for try await line in handle.bytes.lines {
        print(line)
    }
}

// å¹¶è¡Œè°ƒç”¨å¼‚æ­¥å‡½æ•°
async {
    // ä¸²è¡Œå¼‚æ­¥
    let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;) // è°ƒç”¨å¼‚æ­¥å‡½æ•°
    let firstPhoto = await downloadPhoto(named: photoNames[0])
    let secondPhoto = await downloadPhoto(named: photoNames[1])
    let photos = [firstPhoto, secondPhoto]
    show(photo: photos)

    // å¹¶è¡Œå¼‚æ­¥
    async let firstPhotoC = downloadPhoto(named: photoNames[0])
    async let secondPhotoC = downloadPhoto(named: photoNames[1])
    let photosC = await [firstPhotoC, secondPhotoC]
    show(photo: photosC)
}


// ä»»åŠ¡å’Œä»»åŠ¡ç»„ï¼šç»“æ„åŒ–å¹¶å‘ï¼Œçˆ¶å­ä»»åŠ¡
async {
    await withTaskGroup(of: String.self, body: { taskGroup in //Data.self -&amp;gt; ç±»æ¯”oc [xxx class]
        let photoNames = await listPhotos(inGallery: &quot;Summer Vacation&quot;)
        for name in photoNames {
            taskGroup.async(priority: .default, operation: { // å¯ä»¥æ ¹æ®ä»»åŠ¡æŒ‡å®šä¼˜å…ˆçº§
                await downloadPhoto(named: name) as! String
            })
        }
    })
}

// éç»“æ„åŒ–å¹¶å‘
Task.init(priority: .default) {
    let handle = Task.init(priority: .default) {
        return await listPhotos(inGallery: &quot;Summer Vacation&quot;)
    }
    let result = await handle.value
    show(photo: result)

    // ä¸‹ä¸€ä¸ªå°ç« èŠ‚ï¼šä»»åŠ¡å–æ¶ˆ
    if handle.isCancelled {
        handle.cancel() // æ‰‹åŠ¨å–æ¶ˆä»»åŠ¡
    }
}


// ä»»åŠ¡å–æ¶ˆğŸ‘†[çœ‹ä¸Šé¢]


/*
 Actor å¼•ç”¨ç±»å‹
 data reaces avoid
 let is safe for concurrency class


 */

// actor åˆ›å»ºçš„ç»“æ„ä½“ã€ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªtaskè®¿é—®å…¶å¯å˜çŠ¶æ€ã€‘
actor TemperatureLogger {
    let label: String
    var measurements: [Int]
    private(set) var max: Int // å¯èƒ½æš‚åœçš„ç‚¹

    init(label: String, measurement: Int) {
        self.label = label
        self.measurements = [measurement]
        self.max = measurement
    }
}

// æ‰©å±•
extension TemperatureLogger {
    func update(with measurement: Int) { // ä¸åŒ…å«ç»ˆç«¯ï¼Œä¼šè®¿é—®é”™è¯¯
        measurements.append(measurement)
        if measurement &amp;gt; max {
            max = measurement
        }
    }
}

let logger = TemperatureLogger(label: &quot;Outdoors&quot;, measurement: 25)
Task.init(priority: .default, operation: {
    // å‚ä¸è€…éš”ç¦» actir isolation
    print(await logger.max)
//    print(logger.max) // Expression is 'async' but is not marked with 'await'
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>WANG</name></author><summary type="html">swift5.5 å¹¶å‘</summary></entry></feed>